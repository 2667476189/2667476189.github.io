---
title: 取色器
date: 2021-10-12 09:49:26
tags:
  - JavaScript
  - 尝鲜
---

chrome97支持了取色器功能，支持用户点击从屏幕取色

<!--more-->

## 支持检测

```js
if(!window.EyeDropper){
    console.error('不支持滴管api')
}
```

## 使用实例

```js
let eye
if (window.EyeDropper) {
    eye = new EyeDropper()
    eye.open().then(
        (colorResult) =>{ console.log(colorResult.sRGBHex)}
    ).catch(e=>{
        // 点击esc退出选取时触发
        console.error('用户取消选择颜色')
    })
}
```

## 在线运行

{%raw%}
 <button id="dropper">点击打开取色器</button>
    <div>
        <label for="colorShow">颜色展示（部分浏览器默认的颜色选择器可能无法观察实时的值）</label>
        <input id="colorShow" type="color" />
    </div>
    <script>
        let eye
        if (window.EyeDropper) {
            eye = new EyeDropper()
        }
        const colorInput = document.querySelector('#colorShow')
        const dropper = document.querySelector('#dropper')
        colorInput.addEventListener('click', (e) => {
            e.preventDefault()
        })
        dropper.addEventListener('click', () => {
            if (!window.EyeDropper) {
                alert('不支持滴管api!')
                return
            }
            eye.open().then(
                (colorResult) => (colorInput.value = colorResult.sRGBHex)
            ).catch(e=>{
                alert('取消了选择!')
            })
        })
    </script>
{%endraw%}
